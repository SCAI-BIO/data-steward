{"remainingRequest":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/src/components/DataModelEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/src/components/DataModelEdit.vue","mtime":1635322962953},{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635508076994},{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1635508076954},{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/babel-loader/lib/index.js","mtime":1635508077568},{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635508076994},{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/vue-loader/lib/index.js","mtime":1635508077737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBheCBmcm9tICJheGlvcyI7CmNvbnN0IGF4aW9zID0gYXg7CmltcG9ydCBNIGZyb20gIm1hdGVyaWFsaXplLWNzcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZWRpdERhdGFtb2RlbCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGF0dHJzOiBbXSwKICAgICAgc291cmNlczogW10sCiAgICAgIHVuaXRzOiBbXSwKICAgICAgYWRkQ29kZVRhYmxlUm93TnVtOiAxLAogICAgfTsKICB9LAogIGFzeW5jIGNyZWF0ZWQoKSB7CiAgICBjb25zdCB1bml0cyA9IGF3YWl0IGF4aW9zLmdldCgKICAgICAgcHJvY2Vzcy5lbnYuVlVFX0FQUF9DTElOSUNBTFVSTCArICIvZ2V0L3VuaXRzIgogICAgKTsKICAgIGNvbnN0IHVuaXRzQXNKc29uID0gSlNPTi5wYXJzZSh1bml0cy5kYXRhWyJ1bml0cyJdKTsKICAgIHVuaXRzQXNKc29uLmZvckVhY2goKHVuaXQpID0+IHsKICAgICAgdGhpcy51bml0cy5wdXNoKHsKICAgICAgICBuYW1lOiB1bml0WyJwayJdLAogICAgICAgIFVDVU06IHVuaXRbImZpZWxkcyJdWyJVQ1VNIl0sCiAgICAgICAgZGVzY3JpcHRpb246IHVuaXRbImZpZWxkcyJdWyJEZXNjcmlwdGlvbiJdLAogICAgICB9KTsKICAgIH0pOwoKICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBhd2FpdCBheGlvcy5nZXQoCiAgICAgIHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJTklDQUxVUkwgKyAiL2dldC9hdHRyaWJ1dGVzL2FsbCIKICAgICk7CiAgICBjb25zdCBzb3VyY2VzX2FsbCA9IGF3YWl0IGF4aW9zLmdldCgKICAgICAgcHJvY2Vzcy5lbnYuVlVFX0FQUF9DTElOSUNBTFVSTCArICIvZ2V0L3NvdXJjZXMvYWxsIgogICAgKTsKICAgIC8vY29uc29sZS5sb2coYXR0cmlidXRlc1snZGF0YSddWydhdHRyaWJ1dGVzJ10pOwogICAgYXR0cmlidXRlc1siZGF0YSJdWyJhdHRyaWJ1dGVzIl0uZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgICB0aGlzLmF0dHJzLnB1c2goZWxlbWVudFsibmFtZSJdKTsKICAgIH0pOwoKICAgIGxldCBhdXRvQ29tcGxldGVEYXRhID0ge307CiAgICB0aGlzLmF0dHJzLmZvckVhY2goKGF0dCkgPT4gewogICAgICBhdXRvQ29tcGxldGVEYXRhW2F0dF0gPSBudWxsOwogICAgfSk7CiAgICB2YXIgYXV0b0NvbXBsZXRlT3B0aW9ucyA9IHsKICAgICAgZGF0YTogYXV0b0NvbXBsZXRlRGF0YSwKICAgIH07CiAgICBNLlRhYnMuaW5pdChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIudGFicyIpKTsKCiAgICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuYXV0b2NvbXBsZXRlIik7CiAgICBNLkF1dG9jb21wbGV0ZS5pbml0KGVsZW1zLCBhdXRvQ29tcGxldGVPcHRpb25zKTsKICAgIHZhciBlbGVtc01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLm1vZGFsIik7CiAgICBNLk1vZGFsLmluaXQoZWxlbXNNb2RhbCk7CgogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN1Ym1pdF9hZGRfYXR0ciIpLm9uY2xpY2sgPSBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBpbnN0YW5jZSA9IE0uTW9kYWwuZ2V0SW5zdGFuY2UoCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1vZGFsX2F0dHJfYWRkIikKICAgICAgKTsKICAgICAgdmFyIGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhdHRyaWJ1dGVfbmFtZSIpOwogICAgICBoZWFkZXIuaW5uZXJIVE1MID0gIiI7CiAgICAgIHZhciB2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXR0cl9uZXciKS52YWx1ZTsKICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZhbCkpOwogICAgICBpZiAodmFsICE9IG51bGwgJiYgdmFsICE9ICIiKSB7CiAgICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGF4aW9zLmdldCgKICAgICAgICAgIHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJTklDQUxVUkwgKwogICAgICAgICAgICAiL2dldC9jaGVjay1hdHRyIiArCiAgICAgICAgICAgICI/YXR0cl9uYW1lPSIgKwogICAgICAgICAgICB2YWwKICAgICAgICApOwogICAgICAgIC8vY29uc29sZS5sb2cocmVzcCk7CiAgICAgICAgaWYgKHJlc3BbImRhdGEiXVsibWVzc2FnZSJdID09ICJ0YWtlbiIpIHsKICAgICAgICAgIE0udG9hc3QoeyBodG1sOiAiQXR0cmlidXRlIE5hbWUgYWxyZWFkeSB0YWtlbiEiIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBkb2N1bWVudAogICAgICAgICAgLmdldEVsZW1lbnRCeUlkKCJuZXdfYXR0cl9hdHRyaWJ1dGUiKQogICAgICAgICAgLnNldEF0dHJpYnV0ZSgidmFsdWUiLCB2YWwpOwogICAgICAgIE0udXBkYXRlVGV4dEZpZWxkcygpOwogICAgICAgIGluc3RhbmNlLm9wZW4oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBNLnRvYXN0KHsgaHRtbDogIlBsZWFzZSBjaGVjayB5b3VyIGlucHV0ISIgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICB9OwoKICAgIC8qKgogICAgICBDbGljayBvbiBhZGQgY29kZSBtYXBwaW5nCgogICAgKi8KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb2RlX21hcHBpbmdfYWRkX2J0biIpLm9uY2xpY2sgPSBmdW5jdGlvbigpewogICAgICB2YXIgY29kZU1hcHBpbmdOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvZGVfbWFwcGluZ19pbnB1dCIpLnZhbHVlOwogICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9IE0uTW9kYWwuZ2V0SW5zdGFuY2UoCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9kYWxfYWRkX2NvZGVfbWFwcGluZyIpCiAgICAgICAgKTsKICAgICAgaWYgKGNvZGVNYXBwaW5nTmFtZSA9PSBudWxsIHx8IGNvZGVNYXBwaW5nTmFtZSA9PSAiIikgewogICAgICAgIE0udG9hc3QoewogICAgICAgICAgaHRtbDogIlBsZWFzZSBwcm92aWRlIGEgdmFsaWQgQ29kZS1NYXBwaW5nIG5hbWUhIiwKICAgICAgICB9KTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbW9kYWxJbnN0YW5jZS5vcGVuKCk7CgogICAgICB9CiAgICAgIAogICAgICAKICAgIH0KCiAgICAvKioKICAgICAqIENsaWNrIG9uIHVuaXQgYWRkCiAgICAgKiBhZGRpbmcgdW5pdAogICAgICoKICAgICAqCiAgICAgKi8KCiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidW5pdF9hZGRfYnRuIikub25jbGljayA9ICgpID0+IHsKICAgICAgdmFyIHVuaXROYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVuaXQiKS52YWx1ZTsKICAgICAgaWYgKHVuaXROYW1lID09IG51bGwgfHwgdW5pdE5hbWUgPT0gIiIpIHsKICAgICAgICBNLnRvYXN0KHsKICAgICAgICAgIGh0bWw6ICJQbGVhc2UgcHJvdmlkZSBhIHZhbGlkIHVuaXQgbmFtZSEiLAogICAgICAgIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9IE0uTW9kYWwuZ2V0SW5zdGFuY2UoCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9kYWxfYWRkX3VuaXQiKQogICAgICAgICk7CiAgICAgICAgdmFyIGhlYWRlclVuaXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1bml0X25hbWVfaGVhZGVyIik7CiAgICAgICAgaGVhZGVyVW5pdE1vZGFsLmlubmVyVGV4dCA9IHVuaXROYW1lOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1bml0X25hbWUiKS52YWx1ZSA9IHVuaXROYW1lOwogICAgICAgIE0udXBkYXRlVGV4dEZpZWxkcygpOwoKICAgICAgICBtb2RhbEluc3RhbmNlLm9wZW4oKTsKICAgICAgfQogICAgfTsKICAgIC8qKgogICAgICoKICAgICAqIHN1Ym1pdCB1bml0IGFkZAogICAgICoKICAgICAqLwoKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtX2FkZF91bml0Iikub25zdWJtaXQgPSBhc3luYyBmdW5jdGlvbiAoZSkgewogICAgICB2YXIgdW5pdE5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidW5pdCIpLnZhbHVlOwogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHRoaXMpOwogICAgICBjb25zdCB1bml0VXBsb2FkUmVzcG9uc2UgPSBhd2FpdCBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgdXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX0NMSU5JQ0FMVVJMICsgIi9wb3N0L3VuaXQiLAogICAgICAgIGRhdGE6IGZvcm1EYXRhLAogICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgfSk7CiAgICAgIGlmICh1bml0VXBsb2FkUmVzcG9uc2UuZGF0YVsibWVzc2FnZSJdID09ICJvayIpIHsKICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9IE0uTW9kYWwuZ2V0SW5zdGFuY2UoCiAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9kYWxfYWRkX3VuaXQiKQogICAgICAgICk7CiAgICAgICAgbW9kYWxJbnN0YW5jZS5jbG9zZSgpOwogICAgICAgIE0udG9hc3QoewogICAgICAgICAgaHRtbDogIllvdSBzdWNjZXNzZnVsbHkgYWRkZWQgYSB1bml0OiAiICsgdW5pdE5hbWUsCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ1bml0X2Vycm9yX21lc3NhZ2UiKS5pbm5lclRleHQgPSAiU29tZXRoaW5nIHdlbnQgd3JvbmcuLi4gdHJ5IGFnYWluIG9yIGNvbnRhY3QgdGhlIHN1cHBvcnQuIjsKICAgICAgfQogICAgfTsKCiAgICAvKioKICAgICAqIENsaWNrIG9uIGNvZGUgYWRkCiAgICAgKiBBZGRpbmcgQ29kZQogICAgICogQ29kZSBhZGQKICAgICAqCiAgICAgKi8KICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb2RlX2FkZF9idG4iKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgY29kZU5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY29kZSIpLnZhbHVlOwogICAgICBpZiAoY29kZU5hbWUgPT0gbnVsbCB8fCBjb2RlTmFtZSA9PSAiIikgewogICAgICAgIE0udG9hc3QoewogICAgICAgICAgaHRtbDogIlBsZWFzZSBwcm92aWRlIGEgdmFsaWQgY29kZSBuYW1lISIsCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gTS5Nb2RhbC5nZXRJbnN0YW5jZSgKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb2RhbF9hZGRfY29kZSIpCiAgICAgICAgKTsKCiAgICAgICAgdmFyIGhlYWRlckNvZGVNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb2RlX25hbWVfaGVhZGVyIik7CiAgICAgICAgaGVhZGVyQ29kZU1vZGFsLmlubmVyVGV4dCA9IGNvZGVOYW1lOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb2RlX25hbWUiKS52YWx1ZSA9IGNvZGVOYW1lOwogICAgICAgIE0udXBkYXRlVGV4dEZpZWxkcygpOwoKICAgICAgICBtb2RhbEluc3RhbmNlLm9wZW4oKTsKICAgICAgfQogICAgfTsKICAgIC8qKgogICAgICogQWRkaW5nIHJvd3MgaW4gYWRkIGNvZGUgZGlhbG9nCiAgICAgKiBhZGQgcm93CiAgICAgKiBhZGQgY29kZSBrZXkgdmFsdWUKICAgICAqCiAgICAgKgogICAgICovCiAgICB2YXIgYWRkQ29kZVRhYmxlUm93cyA9IHRoaXMuYWRkQ29kZVRhYmxlUm93TnVtOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFkZF9jb2RlX3Jvd19idG4iKS5vbmNsaWNrID0gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdGFibGVCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInRhYmxlX2JvZHlfY29kZSIpOwogICAgICB2YXIgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTsKICAgICAgdmFyIHRkS2V5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsKICAgICAgdmFyIHRkVmFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidGQiKTsKICAgICAgdmFyIGlucHV0S2V5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgdmFyIGlucHV0VmFsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiaW5wdXQiKTsKICAgICAgaW5wdXRLZXkuc2V0QXR0cmlidXRlKCJuYW1lIiwgImtleV8iICsgU3RyaW5nKGFkZENvZGVUYWJsZVJvd3MgKyAxKSk7CiAgICAgIGlucHV0VmFsLnNldEF0dHJpYnV0ZSgibmFtZSIsICJ2YWxfIiArIFN0cmluZyhhZGRDb2RlVGFibGVSb3dzICsgMSkpOwogICAgICB0ZEtleS5hcHBlbmRDaGlsZChpbnB1dEtleSk7CiAgICAgIHRkVmFsLmFwcGVuZENoaWxkKGlucHV0VmFsKTsKICAgICAgcm93LmFwcGVuZENoaWxkKHRkS2V5KTsKICAgICAgcm93LmFwcGVuZENoaWxkKHRkVmFsKTsKICAgICAgdGFibGVCb2R5LmFwcGVuZENoaWxkKHJvdyk7CiAgICAgIGFkZENvZGVUYWJsZVJvd3MrKzsKICAgICAgcmV0dXJuOwogICAgfTsKCiAgICAvKioKICAgICAqIFN1Ym1pdCBvZiBjb2RlIGFwcCBmb3JtCiAgICAgKgogICAgICoKICAgICAqLwoKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtX2FkZF9jb2RlIikub25zdWJtaXQgPSBhc3luYyBmdW5jdGlvbiAoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSh0aGlzKTsKCiAgICAgIGNvbnN0IGNvZGVVcGxvYWRSZXNwb25zZSA9IGF3YWl0IGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJTklDQUxVUkwgKyAiL3Bvc3QvY29kZSIsCiAgICAgICAgZGF0YTogZm9ybURhdGEsCiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICB9KTsKCiAgICAgIAogICAgICBpZiAoY29kZVVwbG9hZFJlc3BvbnNlLnN0YXR1cyA9PSAyMDAgJiYgIGNvZGVVcGxvYWRSZXNwb25zZS5kYXRhWyJtZXNzYWdlIl0gPT0gIm9rIikgewogICAgICAgIHZhciBtb2RhbEluc3RhbmNlID0gTS5Nb2RhbC5nZXRJbnN0YW5jZSgKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb2RhbF9hZGRfY29kZSIpCiAgICAgICAgKTsKICAgICAgICBtb2RhbEluc3RhbmNlLmNsb3NlKCk7CiAgICAgICAgdmFyIGNvZGVOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvZGUiKS52YWx1ZTsKCiAgICAgICAgTS50b2FzdCh7CiAgICAgICAgICBodG1sOiAiWW91IHN1Y2Nlc3NmdWxseSBhZGRlZCBhIGNvZGU6ICIgKyBjb2RlTmFtZSwKICAgICAgICB9KTsKICAgICAgICB0aGlzLnJlc2V0KCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNvZGUiKS52YWx1ZSA9ICIiOwoKCgogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBlbHNlewogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBhZGRpbmcgY29kZS4iKQogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb2RlX2Vycm9yX21lc3NhZ2UiKS5pbm5lclRleHQgPSAiU29tZXRoaW5nIHdlbnQgd3JvbmcuLi4uIFRyeSBhZ2FpbiBvciBjb250YWN0IHRoZSBzdXBwb3J0LiIKCiAgICAgIH0KICAgIH07CgogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFkZF9hdHRyIikub25zdWJtaXQgPSBhc3luYyBmdW5jdGlvbiAoZSkgewogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhZGRfYXR0cl9idG4iKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkX2F0dHJfbG9hZGVyIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CgogICAgICB2YXIgZm9ybV9kYXRhID0gbmV3IEZvcm1EYXRhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhZGRfYXR0ciIpKTsKICAgICAgY29uc29sZS5sb2coZm9ybV9kYXRhKTsKICAgICAgY29uc3QgcG9zdEF0dHJpYnV0ZSA9IGF3YWl0IGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJTklDQUxVUkwgKyAiL3Bvc3QvYXR0cmlidXRlIiwKICAgICAgICBkYXRhOiBmb3JtX2RhdGEsCiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICB9KTsKICAgICAgaWYgKAogICAgICAgIHBvc3RBdHRyaWJ1dGVbImRhdGEiXVsibWVzc2FnZSJdID09ICJvayIgJiYKICAgICAgICBwb3N0QXR0cmlidXRlLnN0YXR1cyA9PSAyMDAKICAgICAgKSB7CiAgICAgICAgdmFyIGluc3RhbmNlID0gTS5Nb2RhbC5nZXRJbnN0YW5jZSgKICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb2RhbF9hdHRyX2FkZCIpCiAgICAgICAgKTsKICAgICAgICBpbnN0YW5jZS5jbG9zZSgpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhZGRfYXR0cl9idG4iKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkX2F0dHJfbG9hZGVyIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkX2F0dHIiKS5yZXNldCgpOwoKICAgICAgICBNLnRvYXN0KHsKICAgICAgICAgIGh0bWw6ICJZb3UgY3JlYXRlZCBhIG5ldyBBdHRyaWJ1dGU6ICIgKyBmb3JtX2RhdGEuZ2V0KCJhdHRyaWJ1dGUiKSwKICAgICAgICB9KTsKICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gYXdhaXQgYXhpb3MuZ2V0KAogICAgICAgICAgcHJvY2Vzcy5lbnYuVlVFX0FQUF9DTElOSUNBTFVSTCArICIvZ2V0L2F0dHJpYnV0ZXMvYWxsIgogICAgICAgICk7CiAgICAgICAgYXR0cmlidXRlc1siZGF0YSJdWyJhdHRyaWJ1dGVzIl0uZm9yRWFjaCgoZWxlbWVudCkgPT4gewogICAgICAgICAgdGhpcy5hdHRycy5wdXNoKGVsZW1lbnRbIm5hbWUiXSk7CiAgICAgICAgfSk7CgogICAgICAgIGxldCBhdXRvQ29tcGxldGVEYXRhID0ge307CiAgICAgICAgdGhpcy5hdHRycy5mb3JFYWNoKChhdHQpID0+IHsKICAgICAgICAgIGF1dG9Db21wbGV0ZURhdGFbYXR0XSA9IG51bGw7CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGF1dG9Db21wbGV0ZU9wdGlvbnMgPSB7CiAgICAgICAgICBkYXRhOiBhdXRvQ29tcGxldGVEYXRhLAogICAgICAgIH07CgogICAgICAgIHZhciBlbGVtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoIi5hdXRvY29tcGxldGUiKTsKICAgICAgICBNLkF1dG9jb21wbGV0ZS5pbml0KGVsZW1zLCBhdXRvQ29tcGxldGVPcHRpb25zKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygiU29tZXRoaW5nIHdlbnQgd3JvbmcuLi4iKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkX2F0dHJfbG9hZGVyIikuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVycm9yX2FkZCIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvcl9hZGQiKS5pbm5lckhUTUwgKz0KICAgICAgICAgICI6ICIgKyBwb3N0QXR0cmlidXRlWyJkYXRhIl1bIm1lc3NhZ2UiXTsKICAgICAgfQogICAgfTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdWJtaXRfbWFwcGluZyIpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBpbnN0YW5jZSA9IE0uTW9kYWwuZ2V0SW5zdGFuY2UoCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1vZGFsX2FkZF9tYXBwaW5nIikKICAgICAgKTsKICAgICAgdmFyIGF0dHIxID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNvdXJjZV9hdHRyIikudmFsdWU7CiAgICAgIHZhciBhdHRyMiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0YXJnZXRfYXR0ciIpLnZhbHVlOwogICAgICBpZiAoYXR0cjEgPT0gIiIgfHwgYXR0cjIgPT0gIiIgfHwgYXR0cjEgPT0gbnVsbCB8fCBhdHRyMiA9PSBudWxsKSB7CiAgICAgICAgTS50b2FzdCh7IGh0bWw6ICJQbGVhc2UgY2hlY2sgeW91ciBpbnB1dCEiIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFwcGluZ19uYW1lXzEiKS5pbm5lckhUTUwgPSBhdHRyMTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWFwcGluZ19uYW1lXzIiKS5pbm5lckhUTUwgPSBhdHRyMjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXR0cl9tYXBwaW5nX3NvdXJjZSIpLnZhbHVlID0gYXR0cjE7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImF0dHJfbWFwcGluZ190YXJnZXQiKS52YWx1ZSA9IGF0dHIyOwogICAgICAgIHZhciBhdXRvY29tcGxldGVfc291cmNlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1hcHBpbmdfc291cmNlIik7CiAgICAgICAgbGV0IGF1dG9Db21wbGV0ZURhdGFfc291cmNlID0ge307CiAgICAgICAgc291cmNlc19hbGxbImRhdGEiXVsic291cmNlcyJdLmZvckVhY2goKGVsZW0pID0+IHsKICAgICAgICAgIGF1dG9Db21wbGV0ZURhdGFfc291cmNlW2VsZW1dID0gbnVsbDsKICAgICAgICB9KTsKICAgICAgICB2YXIgYXV0b0NvbXBsZXRlT3B0aW9uc19zb3VyY2UgPSB7CiAgICAgICAgICBkYXRhOiBhdXRvQ29tcGxldGVEYXRhX3NvdXJjZSwKICAgICAgICB9OwoKICAgICAgICBNLkF1dG9jb21wbGV0ZS5pbml0KGF1dG9jb21wbGV0ZV9zb3VyY2UsIGF1dG9Db21wbGV0ZU9wdGlvbnNfc291cmNlKTsKICAgICAgICBNLnVwZGF0ZVRleHRGaWVsZHMoKTsKICAgICAgICBpbnN0YW5jZS5vcGVuKCk7CiAgICAgIH0KICAgIH07CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkX21hcHBpbmdfZm9ybSIpLm9uc3VibWl0ID0gYXN5bmMgZnVuY3Rpb24gKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB2YXIgaW5zdGFuY2UgPSBNLk1vZGFsLmdldEluc3RhbmNlKAogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtb2RhbF9hZGRfbWFwcGluZyIpCiAgICAgICk7CiAgICAgIHZhciBhdHRyMSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzb3VyY2VfYXR0ciIpLnZhbHVlOwogICAgICB2YXIgYXR0cjIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidGFyZ2V0X2F0dHIiKS52YWx1ZTsKICAgICAgdmFyIGZvcm1fZGF0YSA9IG5ldyBGb3JtRGF0YShkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkX21hcHBpbmdfZm9ybSIpKTsKCiAgICAgIGNvbnN0IHBvc3RNYXBwaW5nID0gYXdhaXQgYXhpb3MoewogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9DTElOSUNBTFVSTCArICIvcG9zdC9tYXBwaW5nIiwKICAgICAgICBkYXRhOiBmb3JtX2RhdGEsCiAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlLAogICAgICB9KTsKICAgICAgY29uc29sZS5sb2cocG9zdE1hcHBpbmcpOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXR0cl9tYXBwaW5nX2J0biIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhdHRyX21hcHBpbmdfbG9hZGVyIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgIGlmIChwb3N0TWFwcGluZ1siZGF0YSJdWyJtZXNzYWdlIl0gPT0gIm9rIiAmJiBwb3N0TWFwcGluZy5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgaW5zdGFuY2UuY2xvc2UoKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYWRkX21hcHBpbmdfZm9ybSIpLnJlc2V0KCk7CiAgICAgICAgTS50b2FzdCh7CiAgICAgICAgICBodG1sOgogICAgICAgICAgICAiWW91IHN1Y2Nlc3NmdWxseSBhZGRlZCBhbiBBdHRyaWJ1dGUgTWFwcGluZzogIiArCiAgICAgICAgICAgIGF0dHIxICsKICAgICAgICAgICAgIiAtLT4gIiArCiAgICAgICAgICAgIGF0dHIyLAogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvcl9tYXBwaW5nIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImF0dHJfbWFwcGluZ19sb2FkZXIiKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhdHRyX21hcHBpbmdfYnRuIikuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CgogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvcl9tYXBwaW5nIikuaW5uZXJIVE1MID0KICAgICAgICAgICJPb29wcy4uLiBTb21ldGhpbmcgd2VudCB3cm9uZzogIjsKICAgICAgICBkb2N1bWVudAogICAgICAgICAgLmdldEVsZW1lbnRCeUlkKCJlcnJvcl9tYXBwaW5nIikKICAgICAgICAgIC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwb3N0TWFwcGluZ1siZGF0YSJdWyJtZXNzYWdlIl0pKTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9OwoKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdWJtaXRfYWRkX3NyYyIpLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBpbnN0YW5jZSA9IE0uTW9kYWwuZ2V0SW5zdGFuY2UoCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1vZGFsX2FkZF9zcmMiKQogICAgICApOwogICAgICB2YXIgc3JjTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzcmNfbmV3IikudmFsdWU7CiAgICAgIGlmIChzcmNOYW1lID09ICIiIHx8IHNyY05hbWUgPT0gbnVsbCkgewogICAgICAgIE0udG9hc3QoeyBodG1sOiAiUGxlYXNlIGNoZWNrIHlvdXIgaW5wdXQhIiB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpbnN0YW5jZS5vcGVuKCk7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNyY19uYW1lIikuaW5uZXJIVE1MID0gc3JjTmFtZTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3JjX3NvdXJjZSIpLnZhbHVlID0gc3JjTmFtZTsKICAgICAgICBNLnVwZGF0ZVRleHRGaWVsZHMoKTsKICAgICAgfQogICAgfTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJuZXdfc3JjX2Zvcm0iKS5vbnN1Ym1pdCA9IGFzeW5jIGZ1bmN0aW9uIChlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIGluc3RhbmNlID0gTS5Nb2RhbC5nZXRJbnN0YW5jZSgKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9kYWxfYWRkX3NyYyIpCiAgICAgICk7CiAgICAgIHZhciBzcmNOYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNyY19uZXciKS52YWx1ZTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNyY19idG4iKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3JjX2xvYWRlciIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICB2YXIgZm9ybV9kYXRhID0gbmV3IEZvcm1EYXRhKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJuZXdfc3JjX2Zvcm0iKSk7CiAgICAgIC8vY29uc29sZS5sb2coZm9ybV9kYXRhKTsKCiAgICAgIGNvbnN0IHBvc3RTcmMgPSBhd2FpdCBheGlvcyh7CiAgICAgICAgbWV0aG9kOiAicG9zdCIsCiAgICAgICAgdXJsOiBwcm9jZXNzLmVudi5WVUVfQVBQX0NMSU5JQ0FMVVJMICsgIi9wb3N0L3NvdXJjZSIsCiAgICAgICAgZGF0YTogZm9ybV9kYXRhLAogICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgfSk7CgogICAgICBpZiAocG9zdFNyY1siZGF0YSJdWyJtZXNzYWdlIl0gPT0gIm9rIiAmJiBwb3N0U3JjLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibmV3X3NyY19mb3JtIikucmVzZXQoKTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3JjX2xvYWRlciIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNyY19idG4iKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKCiAgICAgICAgaW5zdGFuY2UuY2xvc2UoKTsKICAgICAgICBNLnRvYXN0KHsgaHRtbDogIllvdSBzdWNjZXNzZnVsbHkgYWRkZWQgYSBuZXcgc291cmNlOiAiICsgc3JjTmFtZSB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3JjX2xvYWRlciIpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVycm9yX3NyYyIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlcnJvcl9zcmMiKS5pbm5lckhUTUwgKz0KICAgICAgICAgICI6ICIgKyBwb3N0U3JjWyJkYXRhIl1bIm1lc3NhZ2UiXTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3JjX2J0biIpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICB9CiAgICAgIHJldHVybjsKICAgIH07CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibmV3X2F0dHJfYXR0cmlidXRlIikub25jaGFuZ2UgPSBhc3luYyBmdW5jdGlvbiAoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhdHRyX3Rha2VuX2VyciIpLmlubmVySFRNTCA9ICIiOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXR0cl90YWtlbl9lcnIiKS5zdHlsZS5jb2xvciA9ICJyZWQiOwogICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXR0cl9zdWJtaXRfYnRuIikuZGlzYWJsZWQgPSBmYWxzZTsKICAgICAgY29uc3QgcmVzcCA9IGF3YWl0IGF4aW9zLmdldCgKICAgICAgICBwcm9jZXNzLmVudi5WVUVfQVBQX0NMSU5JQ0FMVVJMICsKICAgICAgICAgICIvZ2V0L2NoZWNrLWF0dHIiICsKICAgICAgICAgICI/YXR0cl9uYW1lPSIgKwogICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm5ld19hdHRyX2F0dHJpYnV0ZSIpLnZhbHVlCiAgICAgICk7CiAgICAgIC8vY29uc29sZS5sb2cocmVzcCk7CiAgICAgIGlmIChyZXNwWyJkYXRhIl1bIm1lc3NhZ2UiXSA9PSAidGFrZW4iKSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImF0dHJfdGFrZW5fZXJyIikuaW5uZXJIVE1MID0KICAgICAgICAgICJBdHRyaWJ1dGUgbmFtZSBpcyBhbHJlYWR5IHRha2VuIjsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYXR0cl9zdWJtaXRfYnRuIikuZGlzYWJsZWQgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhdHRyX3N1Ym1pdF9idG4iKS5kaXNhYmxlZCA9IGZhbHNlOwogICAgICB9CiAgICB9OwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1lYXN1cmVtZW50X2Zvcm0iKS5vbnN1Ym1pdCA9IGFzeW5jIGZ1bmN0aW9uIChlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKHRoaXMpOwogICAgICBjb25zdCB1cGxvYWRSZXNwb25zZSA9IGF3YWl0IGF4aW9zKHsKICAgICAgICBtZXRob2Q6ICJwb3N0IiwKICAgICAgICB1cmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJTklDQUxVUkwgKyAiL3Bvc3QvbWVhc3VyZW1lbnQiLAogICAgICAgIGRhdGE6IGZvcm1EYXRhLAogICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgfSk7CiAgICAgIGlmICh1cGxvYWRSZXNwb25zZS5kYXRhWyJtZXNzYWdlIl0gPT0gIm9rIikgewogICAgICAgIE0udG9hc3QoewogICAgICAgICAgaHRtbDoKICAgICAgICAgICAgIllvdSBhZGRlZCBhIG1lYXN1cmVtZW50IGZvcjogIiArCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJsb2NhdGlvbiIpLnZhbHVlLAogICAgICAgIH0pOwogICAgICAgIHRoaXMucmVzZXQoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJTb21ldGhvbmcgd2VudCB3cm9uZy4uLiIpOwogICAgICB9CiAgICB9OwogIH0sCiAgdXBkYXRlZCgpIHt9LAp9Owo="},{"version":3,"sources":["DataModelEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0zBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DataModelEdit.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"container\">\n    <h1>Model Wizard</h1>\n    <div class=\"row\">\n      <div class=\"col s12\">\n        <ul class=\"tabs\">\n          <li class=\"tab col s3\">\n            <a class=\"active\" href=\"#core_tab\">Variables and Mappings</a>\n          </li>\n          <li class=\"tab col s3\">\n            <a href=\"#measurement_tab\">Measurements</a>\n          </li>\n          <li class=\"tab col s3\">\n            <a href=\"#codes_units_tab\">Codes and Units</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <hr style=\"height: 1px; background-color: black\" />\n\n\n    <!--\n      Modal Code Mappings\n\n      -->\n    <div id=\"modal_add_code_mapping\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4>Add a Code Mapping: <a id=\"code_mapping_name_header\"></a></h4>\n        <p>Please provide more information</p>\n        <h3>This is only available via the spreadsheet...</h3>\n        <p class=\"error_message\" id=\"code_mapping_error_message\"></p>\n\n\n        \n      </div>\n    </div>\n\n  \n\n    <!-- \n\n      Modal units\n\n    -->\n    <div id=\"modal_add_unit\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4>Add a Unit: <a id=\"unit_name_header\"></a></h4>\n        <p>Please provide more information</p>\n        <p class=\"error_message\" id=\"unit_error_message\"></p>\n\n\n        <form id=\"form_add_unit\">\n          <div class=\"row\">\n            <div class=\"input-field col s6\">\n              <input type=\"text\" id=\"unit_name\" required name=\"unit_name\" />\n              <label for=\"unit_name\">Unit name (required)</label>\n              <span class=\"helper-text\">\n                The unique name of the unit throughout the complete datamodel\n              </span>\n            </div>\n            <div class=\"input-field col s6\">\n              <input\n                type=\"text\"\n                id=\"unit_description\"\n                required\n                name=\"unit_description\"\n              />\n              <label for=\"unit_description\">Unit Description (required)</label>\n              <span class=\"helper-text\"> A description for the unit </span>\n            </div>\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <p>\n                  <label>\n                    <input\n                      type=\"checkbox\"\n                      name=\"ucum\"\n                      id=\"unit_ucum\"\n                      checked=\"checked\"\n                    />\n                    <span>Is UCUM Unit (yes/no)</span>\n                  </label>\n                  <span class=\"helper-text\"\n                    >Indicates whether this unit is in UCUM or not</span\n                  >\n                </p>\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"col s12 right-align\">\n                <button\n                  class=\"btn waves-effect waves-green blue-grey lighten-1\"\n                >\n                  Create Unit<i class=\"material-icons right\">send</i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n\n    <!-- \n\n      Modal codes\n\n    -->\n    <div id=\"modal_add_code\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4>Add a Code: <a id=\"code_name_header\"></a></h4>\n        <p>Please provide more information</p>\n                <p class=\"error_message\" id=\"code_error_message\"></p>\n\n        <form id=\"form_add_code\">\n          <div class=\"row\">\n            <div class=\"input-field col s6\">\n              <input type=\"text\" id=\"code_name\" required name=\"code_name\" />\n              <label for=\"code_name\">Code name (required)</label>\n              <span class=\"helper-text\">\n                The unique name of the code throughout the complete datamodel\n              </span>\n            </div>\n            <div class=\"input-field col s6\">\n              <input\n                type=\"text\"\n                id=\"code_description\"\n                required\n                name=\"code_discription\"\n              />\n              <label for=\"code_description\">Code description (required)</label>\n              <span class=\"helper-text\"> A description for the code </span>\n            </div>\n          </div>\n          <div class=\"row\">\n            <p class=\"left-align ml-15\">\n              Provide the code keys with its values\n            </p>\n            <div class=\"col s6\">\n              <table>\n                <thead>\n                  <tr>\n                    <th>Key</th>\n                    <th>Value</th>\n                  </tr>\n                </thead>\n                <tbody id=\"table_body_code\">\n                  <tr>\n                    <td><input name=\"key_1\" type=\"text\" required/></td>\n                    <td><input name=\"val_1\" type=\"text\" required/></td>\n                  </tr>\n                </tbody>\n                <br />\n              </table>\n            </div>\n            <div class=\"input-field col s6\">\n              <p>\n                <label>\n                  <input\n                    type=\"checkbox\"\n                    name=\"active\"\n                    id=\"code_active\"\n                    checked=\"checked\"\n                  />\n                  <span>Active (yes/no)</span>\n                </label>\n                <span class=\"helper-text\"\n                  >Indicates whether item is in use in the backend's current\n                  setup</span\n                >\n              </p>\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col s6 right-align\">\n              <a\n                class=\"btn-floating btn-large waves-effect waves-light blue-grey\"\n                id=\"add_code_row_btn\"\n                ><i class=\"material-icons\">add</i></a\n              >\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col s12 right-align\">\n              <button class=\"btn waves-effect waves-green blue-grey lighten-1\">\n                Create Code<i class=\"material-icons right\">send</i>\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n\n    <div id=\"modal_add_src\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4>Add a Source: <a id=\"src_name\"></a></h4>\n        <p>Please add more information</p>\n\n        <form id=\"new_src_form\">\n          <div class=\"row\">\n            <div class=\"input-field col s6\">\n              <input\n                type=\"text\"\n                name=\"abbreviation\"\n                id=\"src_abbreviation\"\n                required\n              />\n              <label for=\"src_abbreviation\">Abbreviation (required)</label>\n              <span class=\"helper-text\">\n                Abbreviated label, unique in the IDSN clinical datamodel</span\n              >\n            </div>\n            <div class=\"input-field col s6\">\n              <input type=\"text\" name=\"source\" id=\"src_source\" />\n              <label for=\"src_source\">Source</label>\n              <span class=\"helper-text\">\n                Name of the registry/study/source</span\n              >\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"input-field col s6\">\n              <input type=\"text\" name=\"pid_colname\" id=\"src_pid_colname\" />\n              <label for=\"src_pid_colname\">PID_colname</label>\n              <span class=\"helper-text\">\n                Alternate name of column containing the patient's ID</span\n              >\n            </div>\n            <div class=\"input-field col s6\">\n              <input type=\"text\" name=\"site_colname\" id=\"src_site_colname\" />\n              <label for=\"src_site_colname\">SITE_colname</label>\n              <span class=\"helper-text\">\n                Alternate name of column containing the site's ID (multi-center\n                study data)</span\n              >\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"input-field col s6\">\n              <input\n                type=\"text\"\n                name=\"timestamp_colname\"\n                id=\"src_timestamp_colname\"\n              />\n              <label for=\"src_timestamp_colname\">TIMESTAMP_colname</label>\n              <span class=\"helper-text\">\n                Alternate name of column containing the measurement's time\n                stamp</span\n              >\n            </div>\n            <div class=\"input-field col s6\">\n              <input type=\"text\" name=\"header_offset\" id=\"src_header_offset\" />\n              <label for=\"src_header_offset\">Header_offset</label>\n              <span class=\"helper-text\">\n                Number of lines to ignore before expecting the first line of the\n                actual data (which is the header)</span\n              >\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"input-field col s6\">\n              <input type=\"text\" name=\"filepath\" id=\"src_filepath\" />\n              <label for=\"src_filepath\">Filepath</label>\n              <span class=\"helper-text\"> Location of the uploaded file</span>\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"progress\" id=\"src_loader\" style=\"display: none\">\n              <div class=\"indeterminate\"></div>\n            </div>\n\n            <div class=\"col s12 right-align\" id=\"src_btn\">\n              <button class=\"btn waves-effect waves-green blue-grey lighten-1\">\n                Create Source<i class=\"material-icons right\">send</i>\n              </button>\n            </div>\n            <div\n              class=\"col s12\"\n              id=\"error_src\"\n              style=\"display: none; color: red\"\n            >\n              Ooops... Something went wrong\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n    <!-- Modal Structure Add Mapping-->\n    <div id=\"modal_add_mapping\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4>Add Attribute Mapping:</h4>\n        <div class=\"row\">\n          <div class=\"col s4 right-align\"><a id=\"mapping_name_1\"></a></div>\n          <div class=\"col s4\">\n            <i class=\"material-icons\">trending_flat</i>\n          </div>\n          <div class=\"col s4 left-align\"><a id=\"mapping_name_2\"></a></div>\n        </div>\n        <p>Please Fill in additional Information</p>\n        <div class=\"row\">\n          <form id=\"add_mapping_form\">\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <p>\n                  <label>\n                    <input\n                      type=\"checkbox\"\n                      name=\"active\"\n                      id=\"attr_mapping_active\"\n                      checked=\"checked\"\n                    />\n                    <span>Active (yes/no)</span>\n                  </label>\n                  <span class=\"helper-text\"\n                    >Indicates whether item is in use in the backend's current\n                    setup</span\n                  >\n                </p>\n              </div>\n              <div class=\"input-field col s6\">\n                <input\n                  type=\"text\"\n                  name=\"source_attr\"\n                  id=\"attr_mapping_source\"\n                  required\n                  readonly\n                />\n                <label for=\"attr_mapping_source\">Source Attribute</label>\n                <span class=\"helper-text\">\n                  Unique attribute name in the source datamodel</span\n                >\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <input\n                  type=\"text\"\n                  name=\"target\"\n                  id=\"attr_mapping_target\"\n                  required\n                  readonly\n                />\n                <label for=\"attr_mapping_target\">Target Attribute</label>\n                <span class=\"helper-text\"> Name of the Target Attribute</span>\n              </div>\n\n              <div class=\"input-field col s6\">\n                <input\n                  type=\"text\"\n                  name=\"source\"\n                  id=\"mapping_source\"\n                  class=\"autocomplete\"\n                  required\n                />\n\n                <label for=\"mapping_source\">Source</label>\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <input\n                  type=\"text\"\n                  name=\"transformation\"\n                  id=\"attr_mapping_transformation\"\n                />\n                <label for=\"attr_mapping_target\">Transformation</label>\n                <span class=\"helper-text\"\n                  >Operation to be applied, if necessary, when mapping</span\n                >\n              </div>\n            </div>\n            <div class=\"row\">\n              <div\n                class=\"progress\"\n                id=\"attr_mapping_loader\"\n                style=\"display: none\"\n              >\n                <div class=\"indeterminate\"></div>\n              </div>\n\n              <div class=\"col s12 right-align\" id=\"attr_mapping_btn\">\n                <button\n                  class=\"btn waves-effect waves-green blue-grey lighten-1\"\n                >\n                  Create Attribute-Mapping<i class=\"material-icons right\"\n                    >send</i\n                  >\n                </button>\n              </div>\n              <div\n                class=\"col s12\"\n                id=\"error_mapping\"\n                style=\"display: none; color: red\"\n              >\n                Ooops... Something went wrong\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n    <!-- Modal Structure Add Attribute-->\n    <div id=\"modal_attr_add\" class=\"modal\">\n      <div class=\"modal-content\">\n        <h4>Add Attribute: <a id=\"attribute_name\"></a></h4>\n        <p>Please fill in as many information you know</p>\n        <div class=\"row\">\n          <form class=\"col s12\" id=\"add_attr\">\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <p>\n                  <label>\n                    <input\n                      type=\"checkbox\"\n                      name=\"active\"\n                      id=\"new_attr_active\"\n                      checked=\"checked\"\n                    />\n                    <span>Active (yes/no)</span>\n                  </label>\n                  <span class=\"helper-text\"\n                    >Indicates whether item is in use in the backend's current\n                    setup</span\n                  >\n                </p>\n              </div>\n              <div class=\"input-field col s6\">\n                <input type=\"text\" name=\"topic\" id=\"new_attr_topic\" />\n                <label for=\"new_attr_topic\">Topic</label>\n                <span class=\"helper-text\"\n                  >Topic (= semantic category) the identifier belongs to (e.g.\n                  neuropsychology, lab, medication, ...)</span\n                >\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <input\n                  type=\"text\"\n                  name=\"topic_description\"\n                  id=\"new_attr_topic_deescription\"\n                />\n                <label for=\"new_attr_topic_description\"\n                  >Topic Description</label\n                >\n                <span class=\"helper-text\"> Topic's full text description</span>\n              </div>\n              <div class=\"input-field col s6\">\n                <input type=\"text\" name=\"umbrella\" id=\"new_attr_umbrella\" />\n                <label for=\"new_attr_umbrella\">Umbrella</label>\n                <span class=\"helper-text\"\n                  >Generalized term wrapping an attribute with further,\n                  analogous terms (= semantically highly similar, but not\n                  identical)</span\n                >\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <input\n                  type=\"text\"\n                  name=\"umbrella_description\"\n                  id=\"new_attr_umbrella_description\"\n                />\n                <label for=\"new_attr_umbrella_description\"\n                  >Umbrella Description</label\n                >\n                <span class=\"helper-text\"\n                  >Umbrella's full text description</span\n                >\n              </div>\n              <div class=\"input-field col s6\">\n                <input\n                  type=\"text\"\n                  name=\"attribute\"\n                  id=\"new_attr_attribute\"\n                  required=\"required\"\n                />\n                <label for=\"new_attr_attribute\">Attribute (required)</label>\n                <div id=\"attr_taken_err\"></div>\n                <span class=\"helper-text\"\n                  >The unique item's name throughout the overall data\n                  model</span\n                >\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <input\n                  type=\"text\"\n                  name=\"attribute_description\"\n                  id=\"new_attr_attribute_description\"\n                  required=\"required\"\n                />\n                <label for=\"new_attr_attribute_description\"\n                  >Attribute Description (required)</label\n                >\n                <span class=\"helper-text\"\n                  >Unique attribute's fulltext description</span\n                >\n              </div>\n              <div class=\"input-field col s6\">\n                <input\n                  type=\"text\"\n                  name=\"attribute_tooltip\"\n                  id=\"new_attr_tooltip\"\n                  required=\"required\"\n                />\n                <label for=\"new_attr_tooltip\"\n                  >Attribute Tooltip (required)</label\n                >\n                <span class=\"helper-text\"\n                  >Very short description, suitable for tooltips or table\n                  headings</span\n                >\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <select name=\"datatype\" id=\"new_attr_datatype\" class=\"browser-default\">\n                  <option value=\"\" selected>Choose a datatype</option>\n                  <option value=\"code\">code</option>\n                  <option value=\"date\">date</option>\n                  <option value=\"int\">int</option>\n                  <option value=\"float\">float</option>\n                  <option value=\"string\">string</option>\n                  <option value=\"array(date)\">array(date)</option>\n                  <option value=\"array(int)\">array(int)</option>\n                  <option value=\"array(float)\">array(float)</option>\n                  <option value=\"array(string)\">array(string)</option>\n                  <option value=\"array(code)\">array(code)</option>\n                </select>\n              </div>\n              <div class=\"input-field col s6\">\n                <input type=\"text\" name=\"domain\" id=\"new_attr_domain\" />\n                <label for=\"new_attr_domain\">Attribute Range</label>\n                <span class=\"helper-text\"\n                  >Accepted range of numeric values (2-items arry in Python\n                  notation; empty entry is valid) or name of code (for\n                  categorical items)</span\n                >\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <select\n                  name=\"unit\"\n                  id=\"new_attr_unit_unit\"\n                  required=\"required\"\n                  class=\"browser-default\"\n                >\n                  <option value=\"\" selected disabled>Choose a unit</option>\n                  <option v-for=\"unit in units\" :key=\"unit.name\">\n                    {{ unit.name }}\n                  </option>\n                </select>\n\n                <span class=\"helper-text\">Unique code expressing unit</span>\n              </div>\n            </div>\n\n            <div class=\"row\">\n              <div class=\"progress\" id=\"add_attr_loader\" style=\"display: none\">\n                <div class=\"indeterminate\"></div>\n              </div>\n\n              <div class=\"col s12 right-align\" id=\"add_attr_btn\">\n                <button\n                  id=\"attr_submit_btn\"\n                  class=\"btn waves-effect waves-green blue-grey lighten-1\"\n                >\n                  Create Attribute<i class=\"material-icons right\">send</i>\n                </button>\n              </div>\n              <div\n                class=\"col s12\"\n                id=\"error_add\"\n                style=\"display: none; color: red\"\n              >\n                Ooops... Something went wrong\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n    <div id=\"core_tab\" class=\"col s12\">\n      <div class=\"row\">\n        <h4>Extend the Core Model</h4>\n\n        <div class=\"col s12\">\n          <h5>\n            Add an Attribute<i\n              class=\"material-icons tooltipped\"\n              data-position=\"bottom\"\n              data-tooltip=\"Add a new variable to the clinical datamodel. Several information must be provided!\"\n              >info_outline</i\n            >\n          </h5>\n          <div class=\"row\">\n            <div class=\"input-field col s10\">\n              <input id=\"attr_new\" type=\"text\" name=\"attr_new\" />\n              <label for=\"attr_new\">Attribute Name</label>\n            </div>\n            <div class=\"col s2\">\n              <button\n                class=\"btn waves-effect waves-light blue-grey lighten-1\"\n                type=\"button\"\n                id=\"submit_add_attr\"\n              >\n                Add attribute\n                <i class=\"material-icons right\">submit</i>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <br />\n      <hr style=\"height: 1px; background-color: black\" />\n      <div class=\"row\">\n        <h4>Extend the Mappings</h4>\n\n        <div class=\"row\">\n          <h5>\n            Add a Source<i\n              class=\"material-icons tooltipped\"\n              data-position=\"bottom\"\n              data-tooltip=\"Add a new source to the clinical datamodel.\"\n              >info_outline</i\n            >\n          </h5>\n          <div class=\"row\">\n            <div class=\"input-field col s10\">\n              <input id=\"src_new\" type=\"text\" name=\"src_new\" />\n              <label for=\"src_new\">Source Name</label>\n            </div>\n            <div class=\"col s2\">\n              <button\n                class=\"btn waves-effect waves-light blue-grey lighten-1\"\n                type=\"button\"\n                id=\"submit_add_src\"\n              >\n                Add source\n                <i class=\"material-icons right\">submit</i>\n              </button>\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <h5>\n            Add an Attribute-Mapping<i\n              class=\"material-icons tooltipped\"\n              data-position=\"bottom\"\n              data-tooltip=\"The source attribute is the external variable that maps to an internal variable. Source of external variable must be specified!\"\n              >info_outline</i\n            >\n          </h5>\n          <div class=\"col s12\" id=\"attr_mapping_form\">\n            <div class=\"row\">\n              <div class=\"input-field col s4\">\n                <input type=\"text\" name=\"source_attr\" id=\"source_attr\" />\n\n                <label for=\"source_attr\">Source Attribute</label>\n              </div>\n              <div class=\"col s2\">\n                <i class=\"material-icons large\">trending_flat</i>\n              </div>\n              <div class=\"input-field col s4\">\n                <input\n                  type=\"text\"\n                  name=\"target_attr\"\n                  id=\"target_attr\"\n                  class=\"autocomplete\"\n                />\n\n                <label for=\"target_attr\">Target Attribute</label>\n              </div>\n              <div class=\"col s2\">\n                <button\n                  class=\"btn waves-effect waves-light blue-grey lighten-1\"\n                  name=\"action\"\n                  type=\"button\"\n                  id=\"submit_mapping\"\n                >\n                  Add mapping\n                  <i class=\"material-icons right\">submit</i>\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div id=\"measurement_tab\" class=\"col s12\">\n      <div class=\"row\">\n        <h4>\n          Add a measurement\n          <i\n            class=\"material-icons tooltipped\"\n            data-position=\"bottom\"\n            data-tooltip=\"A measurement consists of up to three inputs. WHAT is measured (Object of measurement). WHERE is it measured (Location of measurement). HOW is it measured (Method of measurement).\"\n            >info_outline</i\n          >\n        </h4>\n        <div class=\"row\">\n          <form id=\"measurement_form\" class=\"col s12\">\n            <div class=\"row\">\n              <div class=\"input-field col s6\">\n                <input\n                  required\n                  placeholder=\"e.g. Adrenaline\"\n                  id=\"object\"\n                  name=\"object\"\n                  type=\"text\"\n                  class=\"validate\"\n                />\n                <label for=\"object\">Object of measurement</label>\n              </div>\n              <div class=\"input-field col s6\">\n                <input\n                  placeholder=\"e.g. Blood\"\n                  name=\"location\"\n                  id=\"location\"\n                  type=\"text\"\n                  class=\"validate\"\n                />\n                <label for=\"location\">Location of measurement</label>\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"input-field col s12\">\n                <textarea\n                  id=\"textarea1\"\n                  name=\"method\"\n                  class=\"materialize-textarea\"\n                  placeholder=\"e.g. The patient provides a blood sample of 5ml. The sample needs to be taken on an empty stomach.\"\n                ></textarea>\n                <label for=\"textarea1\">Method of measurement</label>\n              </div>\n            </div>\n            <div class=\"row\">\n              <div class=\"col s12 right-align\">\n                <button\n                  class=\"btn waves-effect waves-green blue-grey lighten-1\"\n                >\n                  Create Measurement<i class=\"material-icons right\">send</i>\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n\n    <div id=\"codes_units_tab\" class=\"col s12\">\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <h5>Add a Code</h5>\n          <div class=\"input-field col s10\">\n            <input\n              placeholder=\"Code\"\n              name=\"code\"\n              id=\"code\"\n              type=\"text\"\n              class=\"validate\"\n            />\n            <label for=\"code\">Code name</label>\n          </div>\n          <div class=\"col s2\">\n            <button\n              class=\"btn waves-effect waves-light blue-grey lighten-1\"\n              type=\"button\"\n              id=\"code_add_btn\"\n            >\n              Add Code\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col s12\">\n          <h5>Add a Unit</h5>\n          <div class=\"input-field col s10\">\n            <input\n              placeholder=\"Unit\"\n              name=\"unit\"\n              id=\"unit\"\n              type=\"text\"\n              class=\"validate\"\n            />\n            <label for=\"unit\">Unit name</label>\n          </div>\n          <div class=\"col s2\">\n            <button\n              class=\"btn waves-effect waves-light blue-grey lighten-1\"\n              type=\"button\"\n              id=\"unit_add_btn\"\n            >\n              Add Unit\n            </button>\n          </div>\n        </div>\n      </div>\n      <div class=\"row\">\n        <h5>Add a Code-Mapping</h5>\n        <div class=\"col s12\">\n          <div class=\"input-field col s10\">\n          <input type=\"text\" class=\"validate\" id=\"code_mapping_input\" placeholder=\"Code Mapping\" name=\"code_mapping_input\"/>\n          <label for=\"code_mapping_input\">Code-Mapping name</label>\n          </div>\n          <div class=\"col s2\">\n            <button\n              class=\"btn waves-effect waves-light blue-grey lighten-1\"\n              type=\"button\"\n              id=\"code_mapping_add_btn\"\n            >\n              Add Code Mapping\n            </button>\n          </div>\n        </div>\n        \n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ax from \"axios\";\nconst axios = ax;\nimport M from \"materialize-css\";\nexport default {\n  name: \"editDatamodel\",\n  data() {\n    return {\n      attrs: [],\n      sources: [],\n      units: [],\n      addCodeTableRowNum: 1,\n    };\n  },\n  async created() {\n    const units = await axios.get(\n      process.env.VUE_APP_CLINICALURL + \"/get/units\"\n    );\n    const unitsAsJson = JSON.parse(units.data[\"units\"]);\n    unitsAsJson.forEach((unit) => {\n      this.units.push({\n        name: unit[\"pk\"],\n        UCUM: unit[\"fields\"][\"UCUM\"],\n        description: unit[\"fields\"][\"Description\"],\n      });\n    });\n\n    const attributes = await axios.get(\n      process.env.VUE_APP_CLINICALURL + \"/get/attributes/all\"\n    );\n    const sources_all = await axios.get(\n      process.env.VUE_APP_CLINICALURL + \"/get/sources/all\"\n    );\n    //console.log(attributes['data']['attributes']);\n    attributes[\"data\"][\"attributes\"].forEach((element) => {\n      this.attrs.push(element[\"name\"]);\n    });\n\n    let autoCompleteData = {};\n    this.attrs.forEach((att) => {\n      autoCompleteData[att] = null;\n    });\n    var autoCompleteOptions = {\n      data: autoCompleteData,\n    };\n    M.Tabs.init(document.querySelectorAll(\".tabs\"));\n\n    var elems = document.querySelectorAll(\".autocomplete\");\n    M.Autocomplete.init(elems, autoCompleteOptions);\n    var elemsModal = document.querySelectorAll(\".modal\");\n    M.Modal.init(elemsModal);\n\n    document.getElementById(\"submit_add_attr\").onclick = async function () {\n      var instance = M.Modal.getInstance(\n        document.getElementById(\"modal_attr_add\")\n      );\n      var header = document.getElementById(\"attribute_name\");\n      header.innerHTML = \"\";\n      var val = document.getElementById(\"attr_new\").value;\n      header.appendChild(document.createTextNode(val));\n      if (val != null && val != \"\") {\n        const resp = await axios.get(\n          process.env.VUE_APP_CLINICALURL +\n            \"/get/check-attr\" +\n            \"?attr_name=\" +\n            val\n        );\n        //console.log(resp);\n        if (resp[\"data\"][\"message\"] == \"taken\") {\n          M.toast({ html: \"Attribute Name already taken!\" });\n          return;\n        }\n        document\n          .getElementById(\"new_attr_attribute\")\n          .setAttribute(\"value\", val);\n        M.updateTextFields();\n        instance.open();\n      } else {\n        M.toast({ html: \"Please check your input!\" });\n        return;\n      }\n    };\n\n    /**\n      Click on add code mapping\n\n    */\n    document.getElementById(\"code_mapping_add_btn\").onclick = function(){\n      var codeMappingName = document.getElementById(\"code_mapping_input\").value;\n      var modalInstance = M.Modal.getInstance(\n          document.getElementById(\"modal_add_code_mapping\")\n        );\n      if (codeMappingName == null || codeMappingName == \"\") {\n        M.toast({\n          html: \"Please provide a valid Code-Mapping name!\",\n        });\n        return;\n      } else {\n        modalInstance.open();\n\n      }\n      \n      \n    }\n\n    /**\n     * Click on unit add\n     * adding unit\n     *\n     *\n     */\n\n    document.getElementById(\"unit_add_btn\").onclick = () => {\n      var unitName = document.getElementById(\"unit\").value;\n      if (unitName == null || unitName == \"\") {\n        M.toast({\n          html: \"Please provide a valid unit name!\",\n        });\n        return;\n      } else {\n        var modalInstance = M.Modal.getInstance(\n          document.getElementById(\"modal_add_unit\")\n        );\n        var headerUnitModal = document.getElementById(\"unit_name_header\");\n        headerUnitModal.innerText = unitName;\n        document.getElementById(\"unit_name\").value = unitName;\n        M.updateTextFields();\n\n        modalInstance.open();\n      }\n    };\n    /**\n     *\n     * submit unit add\n     *\n     */\n\n    document.getElementById(\"form_add_unit\").onsubmit = async function (e) {\n      var unitName = document.getElementById(\"unit\").value;\n      e.preventDefault();\n      const formData = new FormData(this);\n      const unitUploadResponse = await axios({\n        method: \"post\",\n        url: process.env.VUE_APP_CLINICALURL + \"/post/unit\",\n        data: formData,\n        withCredentials: true,\n      });\n      if (unitUploadResponse.data[\"message\"] == \"ok\") {\n        var modalInstance = M.Modal.getInstance(\n          document.getElementById(\"modal_add_unit\")\n        );\n        modalInstance.close();\n        M.toast({\n          html: \"You successfully added a unit: \" + unitName,\n        });\n        return;\n      } else {\n        document.getElementById(\"unit_error_message\").innerText = \"Something went wrong... try again or contact the support.\";\n      }\n    };\n\n    /**\n     * Click on code add\n     * Adding Code\n     * Code add\n     *\n     */\n    document.getElementById(\"code_add_btn\").onclick = function () {\n      var codeName = document.getElementById(\"code\").value;\n      if (codeName == null || codeName == \"\") {\n        M.toast({\n          html: \"Please provide a valid code name!\",\n        });\n        return;\n      } else {\n        var modalInstance = M.Modal.getInstance(\n          document.getElementById(\"modal_add_code\")\n        );\n\n        var headerCodeModal = document.getElementById(\"code_name_header\");\n        headerCodeModal.innerText = codeName;\n        document.getElementById(\"code_name\").value = codeName;\n        M.updateTextFields();\n\n        modalInstance.open();\n      }\n    };\n    /**\n     * Adding rows in add code dialog\n     * add row\n     * add code key value\n     *\n     *\n     */\n    var addCodeTableRows = this.addCodeTableRowNum;\n    document.getElementById(\"add_code_row_btn\").onclick = function () {\n      var tableBody = document.getElementById(\"table_body_code\");\n      var row = document.createElement(\"tr\");\n      var tdKey = document.createElement(\"td\");\n      var tdVal = document.createElement(\"td\");\n      var inputKey = document.createElement(\"input\");\n      var inputVal = document.createElement(\"input\");\n      inputKey.setAttribute(\"name\", \"key_\" + String(addCodeTableRows + 1));\n      inputVal.setAttribute(\"name\", \"val_\" + String(addCodeTableRows + 1));\n      tdKey.appendChild(inputKey);\n      tdVal.appendChild(inputVal);\n      row.appendChild(tdKey);\n      row.appendChild(tdVal);\n      tableBody.appendChild(row);\n      addCodeTableRows++;\n      return;\n    };\n\n    /**\n     * Submit of code app form\n     *\n     *\n     */\n\n    document.getElementById(\"form_add_code\").onsubmit = async function (e) {\n      e.preventDefault();\n      var formData = new FormData(this);\n\n      const codeUploadResponse = await axios({\n        method: \"post\",\n        url: process.env.VUE_APP_CLINICALURL + \"/post/code\",\n        data: formData,\n        withCredentials: true,\n      });\n\n      \n      if (codeUploadResponse.status == 200 &&  codeUploadResponse.data[\"message\"] == \"ok\") {\n        var modalInstance = M.Modal.getInstance(\n          document.getElementById(\"modal_add_code\")\n        );\n        modalInstance.close();\n        var codeName = document.getElementById(\"code\").value;\n\n        M.toast({\n          html: \"You successfully added a code: \" + codeName,\n        });\n        this.reset();\n        document.getElementById(\"code\").value = \"\";\n\n\n\n        return;\n      }\n      else{\n        console.log(\"error adding code.\")\n        document.getElementById(\"code_error_message\").innerText = \"Something went wrong.... Try again or contact the support.\"\n\n      }\n    };\n\n    document.getElementById(\"add_attr\").onsubmit = async function (e) {\n      e.preventDefault();\n      document.getElementById(\"add_attr_btn\").style.display = \"none\";\n      document.getElementById(\"add_attr_loader\").style.display = \"block\";\n\n      var form_data = new FormData(document.getElementById(\"add_attr\"));\n      console.log(form_data);\n      const postAttribute = await axios({\n        method: \"post\",\n        url: process.env.VUE_APP_CLINICALURL + \"/post/attribute\",\n        data: form_data,\n        withCredentials: true,\n      });\n      if (\n        postAttribute[\"data\"][\"message\"] == \"ok\" &&\n        postAttribute.status == 200\n      ) {\n        var instance = M.Modal.getInstance(\n          document.getElementById(\"modal_attr_add\")\n        );\n        instance.close();\n        document.getElementById(\"add_attr_btn\").style.display = \"block\";\n        document.getElementById(\"add_attr_loader\").style.display = \"none\";\n        document.getElementById(\"add_attr\").reset();\n\n        M.toast({\n          html: \"You created a new Attribute: \" + form_data.get(\"attribute\"),\n        });\n        const attributes = await axios.get(\n          process.env.VUE_APP_CLINICALURL + \"/get/attributes/all\"\n        );\n        attributes[\"data\"][\"attributes\"].forEach((element) => {\n          this.attrs.push(element[\"name\"]);\n        });\n\n        let autoCompleteData = {};\n        this.attrs.forEach((att) => {\n          autoCompleteData[att] = null;\n        });\n        var autoCompleteOptions = {\n          data: autoCompleteData,\n        };\n\n        var elems = document.querySelectorAll(\".autocomplete\");\n        M.Autocomplete.init(elems, autoCompleteOptions);\n      } else {\n        console.log(\"Something went wrong...\");\n        document.getElementById(\"add_attr_loader\").style.display = \"none\";\n\n        document.getElementById(\"error_add\").style.display = \"block\";\n        document.getElementById(\"error_add\").innerHTML +=\n          \": \" + postAttribute[\"data\"][\"message\"];\n      }\n    };\n    document.getElementById(\"submit_mapping\").onclick = function () {\n      var instance = M.Modal.getInstance(\n        document.getElementById(\"modal_add_mapping\")\n      );\n      var attr1 = document.getElementById(\"source_attr\").value;\n      var attr2 = document.getElementById(\"target_attr\").value;\n      if (attr1 == \"\" || attr2 == \"\" || attr1 == null || attr2 == null) {\n        M.toast({ html: \"Please check your input!\" });\n        return;\n      } else {\n        document.getElementById(\"mapping_name_1\").innerHTML = attr1;\n        document.getElementById(\"mapping_name_2\").innerHTML = attr2;\n        document.getElementById(\"attr_mapping_source\").value = attr1;\n        document.getElementById(\"attr_mapping_target\").value = attr2;\n        var autocomplete_source = document.getElementById(\"mapping_source\");\n        let autoCompleteData_source = {};\n        sources_all[\"data\"][\"sources\"].forEach((elem) => {\n          autoCompleteData_source[elem] = null;\n        });\n        var autoCompleteOptions_source = {\n          data: autoCompleteData_source,\n        };\n\n        M.Autocomplete.init(autocomplete_source, autoCompleteOptions_source);\n        M.updateTextFields();\n        instance.open();\n      }\n    };\n    document.getElementById(\"add_mapping_form\").onsubmit = async function (e) {\n      e.preventDefault();\n      var instance = M.Modal.getInstance(\n        document.getElementById(\"modal_add_mapping\")\n      );\n      var attr1 = document.getElementById(\"source_attr\").value;\n      var attr2 = document.getElementById(\"target_attr\").value;\n      var form_data = new FormData(document.getElementById(\"add_mapping_form\"));\n\n      const postMapping = await axios({\n        method: \"post\",\n        url: process.env.VUE_APP_CLINICALURL + \"/post/mapping\",\n        data: form_data,\n        withCredentials: true,\n      });\n      console.log(postMapping);\n      document.getElementById(\"attr_mapping_btn\").style.display = \"none\";\n      document.getElementById(\"attr_mapping_loader\").style.display = \"block\";\n      if (postMapping[\"data\"][\"message\"] == \"ok\" && postMapping.status == 200) {\n        instance.close();\n        document.getElementById(\"add_mapping_form\").reset();\n        M.toast({\n          html:\n            \"You successfully added an Attribute Mapping: \" +\n            attr1 +\n            \" --> \" +\n            attr2,\n        });\n      } else {\n        document.getElementById(\"error_mapping\").style.display = \"block\";\n        document.getElementById(\"attr_mapping_loader\").style.display = \"none\";\n        document.getElementById(\"attr_mapping_btn\").style.display = \"block\";\n\n        document.getElementById(\"error_mapping\").innerHTML =\n          \"Ooops... Something went wrong: \";\n        document\n          .getElementById(\"error_mapping\")\n          .appendChild(document.createTextNode(postMapping[\"data\"][\"message\"]));\n      }\n      return;\n    };\n\n    document.getElementById(\"submit_add_src\").onclick = function () {\n      var instance = M.Modal.getInstance(\n        document.getElementById(\"modal_add_src\")\n      );\n      var srcName = document.getElementById(\"src_new\").value;\n      if (srcName == \"\" || srcName == null) {\n        M.toast({ html: \"Please check your input!\" });\n      } else {\n        instance.open();\n        document.getElementById(\"src_name\").innerHTML = srcName;\n        document.getElementById(\"src_source\").value = srcName;\n        M.updateTextFields();\n      }\n    };\n    document.getElementById(\"new_src_form\").onsubmit = async function (e) {\n      e.preventDefault();\n      var instance = M.Modal.getInstance(\n        document.getElementById(\"modal_add_src\")\n      );\n      var srcName = document.getElementById(\"src_new\").value;\n      document.getElementById(\"src_btn\").style.display = \"none\";\n      document.getElementById(\"src_loader\").style.display = \"block\";\n      var form_data = new FormData(document.getElementById(\"new_src_form\"));\n      //console.log(form_data);\n\n      const postSrc = await axios({\n        method: \"post\",\n        url: process.env.VUE_APP_CLINICALURL + \"/post/source\",\n        data: form_data,\n        withCredentials: true,\n      });\n\n      if (postSrc[\"data\"][\"message\"] == \"ok\" && postSrc.status == 200) {\n        document.getElementById(\"new_src_form\").reset();\n        document.getElementById(\"src_loader\").style.display = \"none\";\n        document.getElementById(\"src_btn\").style.display = \"block\";\n\n        instance.close();\n        M.toast({ html: \"You successfully added a new source: \" + srcName });\n      } else {\n        document.getElementById(\"src_loader\").style.display = \"none\";\n        document.getElementById(\"error_src\").style.display = \"block\";\n        document.getElementById(\"error_src\").innerHTML +=\n          \": \" + postSrc[\"data\"][\"message\"];\n        document.getElementById(\"src_btn\").style.display = \"block\";\n      }\n      return;\n    };\n    document.getElementById(\"new_attr_attribute\").onchange = async function () {\n      document.getElementById(\"attr_taken_err\").innerHTML = \"\";\n      document.getElementById(\"attr_taken_err\").style.color = \"red\";\n      document.getElementById(\"attr_submit_btn\").disabled = false;\n      const resp = await axios.get(\n        process.env.VUE_APP_CLINICALURL +\n          \"/get/check-attr\" +\n          \"?attr_name=\" +\n          document.getElementById(\"new_attr_attribute\").value\n      );\n      //console.log(resp);\n      if (resp[\"data\"][\"message\"] == \"taken\") {\n        document.getElementById(\"attr_taken_err\").innerHTML =\n          \"Attribute name is already taken\";\n        document.getElementById(\"attr_submit_btn\").disabled = true;\n      } else {\n        document.getElementById(\"attr_submit_btn\").disabled = false;\n      }\n    };\n    document.getElementById(\"measurement_form\").onsubmit = async function (e) {\n      e.preventDefault();\n      var formData = new FormData(this);\n      const uploadResponse = await axios({\n        method: \"post\",\n        url: process.env.VUE_APP_CLINICALURL + \"/post/measurement\",\n        data: formData,\n        withCredentials: true,\n      });\n      if (uploadResponse.data[\"message\"] == \"ok\") {\n        M.toast({\n          html:\n            \"You added a measurement for: \" +\n            document.getElementById(\"location\").value,\n        });\n        this.reset();\n      } else {\n        console.error(\"Somethong went wrong...\");\n      }\n    };\n  },\n  updated() {},\n};\n</script>\n\n<style scoped>\n.error_message {\n  color: red;\n}\n</style>"]}]}