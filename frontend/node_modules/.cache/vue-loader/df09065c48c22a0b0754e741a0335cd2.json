{"remainingRequest":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/src/components/DataUpload.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/src/components/DataUpload.vue","mtime":1635322962954},{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635508076994},{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/thread-loader/dist/cjs.js","mtime":1635508076954},{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/babel-loader/lib/index.js","mtime":1635508077568},{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1635508076994},{"path":"/Users/philippwegner/Desktop/Fraunhofer/SEM-Group/git/github/data-steward/frontend/node_modules/vue-loader/lib/index.js","mtime":1635508077737}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB2dWUyRHJvcHpvbmUgZnJvbSAidnVlMi1kcm9wem9uZSI7CmltcG9ydCAidnVlMi1kcm9wem9uZS9kaXN0L3Z1ZTJEcm9wem9uZS5taW4uY3NzIjsKaW1wb3J0IHsgdjQgYXMgdXVpZHY0IH0gZnJvbSAidXVpZCI7CmltcG9ydCBNIGZyb20gIm1hdGVyaWFsaXplLWNzcyI7CmltcG9ydCAkIGZyb20gImpxdWVyeSI7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgdnVlRHJvcHpvbmU6IHZ1ZTJEcm9wem9uZSwKICB9LAogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGRyb3B6b25lT3B0aW9uczogewogICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9DTElOSUNBTFVSTCArICIvcG9zdC9iYXNpYy11cGxvYWQiLAogICAgICAgIHRodW1ibmFpbFdpZHRoOiAxNTAsCiAgICAgICAgYWRkUmVtb3ZlTGlua3M6IHRydWUsCiAgICAgICAgbWF4RmlsZXM6IDEsCiAgICAgIH0sCiAgICAgIG5vdEZvdW5kOiBbXSwKICAgICAgYWxsQXR0cmlidXRlczoge30sCiAgICAgIGFsbFNvdXJjZXM6IHt9LAogICAgICBzb3VyY2VMaXN0OiBbXSwKICAgICAgaWQ6IHV1aWR2NCgpLAogICAgICB1cGRhdGVVcmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJTklDQUxVUkwgKyAiL2dldC9jYWNoZSIsCiAgICAgIGludGVydmFsOiAyMDAwLAogICAgICBwcm9ncmVzczogMCwKICAgICAgb3B0aW9uczogewogICAgICAgIGNvbG9yOiAiIzU3OWZkYyIsCiAgICAgICAgImVtcHR5LWNvbG9yIjogIiMzMjRjN2UiLAogICAgICAgIHNpemU6IDMwMCwKICAgICAgICB0aGlja25lc3M6IDUsCiAgICAgICAgImVtcHR5LXRoaWNrbmVzcyI6IDMsCiAgICAgICAgImxpbmUtbW9kZSI6ICJvdXQgNSIsCiAgICAgICAgYW5pbWF0aW9uOiAicnMgNzAwIDEwMDAiLAogICAgICAgICJmb250LXNpemUiOiAiMS41cmVtIiwKICAgICAgICAiZm9udC1jb2xvciI6ICJ3aGl0ZSIsCiAgICAgIH0sCiAgICB9OwogIH0sCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBhd2FpdCBheGlvcy5nZXQoCiAgICAgIHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJTklDQUxVUkwgKyAiL2dldC9hdHRyaWJ1dGVzL2FsbCIKICAgICk7CiAgICBjb25zdCBzb3VyY2VzX2FsbCA9IGF3YWl0IGF4aW9zLmdldCgKICAgICAgcHJvY2Vzcy5lbnYuVlVFX0FQUF9DTElOSUNBTFVSTCArICIvZ2V0L3NvdXJjZXMvYWxsIgogICAgKTsKICAgIHZhciBzb3VyY2VPYmogPSB7fTsKICAgIHZhciBzb3VyY2VMaXN0ID0gW107CiAgICBzb3VyY2VzX2FsbFsiZGF0YSJdWyJzb3VyY2VzIl0uZm9yRWFjaCgoZWxlbSkgPT4gewogICAgICBzb3VyY2VPYmpbZWxlbV0gPSBudWxsOwogICAgICAKICAgIH0pOwogICAgc291cmNlc19hbGxbJ2RhdGEnXVsiYWJicmV2aWF0aW9ucyJdLmZvckVhY2goZWxlbSA9PnsKICAgICAgc291cmNlTGlzdC5wdXNoKGVsZW0pOwogICAgfSk7CiAgICB0aGlzLmFsbFNvdXJjZXMgPSBzb3VyY2VPYmo7CiAgICB0aGlzLnNvdXJjZUxpc3QgPSBzb3VyY2VMaXN0OwogICAgdmFyIGF0dHJPYmogPSB7fTsKICAgIGF0dHJpYnV0ZXNbImRhdGEiXVsiYXR0cmlidXRlcyJdLmZvckVhY2goKGF0dHIpID0+IHsKICAgICAgYXR0ck9ialthdHRyLm5hbWVdID0gbnVsbDsKICAgIH0pOwogICAgdGhpcy5hbGxBdHRyaWJ1dGVzID0gYXR0ck9iajsKICB9LAoKICBtb3VudGVkKCl7CiAgICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3QnKTsKICAgIE0uRm9ybVNlbGVjdC5pbml0KGVsZW1zKTsKICB9LAogIHVwZGF0ZWQoKSB7CiAgICB2YXIgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCIuYXV0b2NvbXBsZXRlIik7CgogICAgTS5BdXRvY29tcGxldGUuaW5pdChlbGVtcywgeyBkYXRhOiB0aGlzLmFsbEF0dHJpYnV0ZXMgfSk7CiAgICB2YXIgZWxlbXNfc291cmNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmF1dG9jb21wbGV0ZV9zb3VyY2UiKTsKCiAgICBNLkF1dG9jb21wbGV0ZS5pbml0KGVsZW1zX3NvdXJjZSwgewogICAgICBkYXRhOiB0aGlzLmFsbFNvdXJjZXMsCiAgICAgIG9uQXV0b2NvbXBsZXRlOiBmdW5jdGlvbiAodmFsKSB7CiAgICAgICAgdmFyIGVtcHR5RmllbGRzID0gW107CiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgiLmF1dG9jb21wbGV0ZV9zb3VyY2UiKS5mb3JFYWNoKChlbGVtKSA9PiB7CiAgICAgICAgICBpZiAoZWxlbS52YWx1ZSA9PSBudWxsIHx8IGVsZW0udmFsdWUgPT0gIiIpIHsKICAgICAgICAgICAgZW1wdHlGaWVsZHMucHVzaChlbGVtKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgZW1wdHlGaWVsZHMuZm9yRWFjaCgoZWxlbSkgPT4gewogICAgICAgICAgZWxlbS52YWx1ZSA9IHZhbDsKICAgICAgICB9KTsKICAgICAgICBNLnVwZGF0ZVRleHRGaWVsZHMoKTsKICAgICAgfSwKICAgIH0pOwogIH0sCgogIG1ldGhvZHM6IHsKCgogICAgcmVmcmVzaEF0dHJpYnV0ZXM6IGFzeW5jIGZ1bmN0aW9uKCl7CiAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gYXdhaXQgYXhpb3MuZ2V0KAogICAgICBwcm9jZXNzLmVudi5WVUVfQVBQX0NMSU5JQ0FMVVJMICsgIi9nZXQvYXR0cmlidXRlcy9hbGwiCiAgICApOwogICAgY29uc3Qgc291cmNlc19hbGwgPSBhd2FpdCBheGlvcy5nZXQoCiAgICAgIHByb2Nlc3MuZW52LlZVRV9BUFBfQ0xJTklDQUxVUkwgKyAiL2dldC9zb3VyY2VzL2FsbCIKICAgICk7CiAgICB2YXIgc291cmNlT2JqID0ge307CiAgICBzb3VyY2VzX2FsbFsiZGF0YSJdWyJzb3VyY2VzIl0uZm9yRWFjaCgoZWxlbSkgPT4gewogICAgICBzb3VyY2VPYmpbZWxlbV0gPSBudWxsOwogICAgfSk7CiAgICB0aGlzLmFsbFNvdXJjZXMgPSBzb3VyY2VPYmo7CgogICAgdmFyIGF0dHJPYmogPSB7fTsKICAgIGF0dHJpYnV0ZXNbImRhdGEiXVsiYXR0cmlidXRlcyJdLmZvckVhY2goKGF0dHIpID0+IHsKICAgICAgYXR0ck9ialthdHRyLm5hbWVdID0gbnVsbDsKICAgIH0pOwogICAgdGhpcy5hbGxBdHRyaWJ1dGVzID0gYXR0ck9iajsKICAgIE0udG9hc3Qoe2h0bWw6ICJSZWZyZXNoZWQgdmFyaWFibGUgYXV0b2NvbXBsZXRlLi4uIn0pOwoKICAgIH0sCiAgICBhZGRNYXBwaW5nOiBhc3luYyBmdW5jdGlvbiAoYXR0cikgewogICAgICB2YXIgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXR0ciArICJfbWFwcGluZ19maWVsZCIpLnZhbHVlOwogICAgICBpZiAodGFyZ2V0ID09IG51bGwgfHwgdGFyZ2V0ID09ICIiKSB7CiAgICAgICAgTS50b2FzdCh7IGh0bWw6ICJQbGVhc2UgY2hlY2sgeW91ciBpbnB1dCEiIH0pOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHNvdXJjZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGF0dHIgKyAiX3NvdXJjZV9maWVsZCIpLnZhbHVlOwoKICAgICAgY29uc3QgbWFwcGluZ1Jlc3BvbnNlID0gYXdhaXQgYXhpb3MoewogICAgICAgIG1ldGhvZDogInBvc3QiLAogICAgICAgIHVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9DTElOSUNBTFVSTCArICIvcG9zdC9iYXNpYy1tYXBwaW5nIiwKICAgICAgICBkYXRhOiB7CiAgICAgICAgICBzb3VyY2U6IHNvdXJjZSwKICAgICAgICAgIHNvdXJjZV9hdHRyaWJ1dGU6IGF0dHIsCiAgICAgICAgICB0YXJnZXQ6IHRhcmdldCwKICAgICAgICB9LAogICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgfSk7CiAgICAgIGlmIChtYXBwaW5nUmVzcG9uc2UuZGF0YVsibWVzc2FnZSJdID09ICJvayIpIHsKICAgICAgICB0aGlzLm5vdEZvdW5kID0gdGhpcy5ub3RGb3VuZC5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0gIT0gYXR0cik7CiAgICAgICAgTS50b2FzdCh7IGh0bWw6ICJZb3Ugc3VjY2Vzc2Z1bGx5IG1hcHBlZDogIiArIGF0dHIgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYXR0ciArICJfZmVlZGJhY2siKS5pbm5lclRleHQgPQogICAgICAgICAgbWFwcGluZ1Jlc3BvbnNlLmRhdGFbIm1lc3NhZ2UiXTsKICAgICAgfQogICAgICByZXR1cm47CiAgICB9LAogICAgYWRkZWRGaWxlOiBmdW5jdGlvbiAoKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmZWVkYmFjayIpLmlubmVyVGV4dCA9CiAgICAgICAgIllvdXIgZGF0YSBpcyBnZXR0aW5nIHByb2Nlc3NlZCI7CiAgICB9LAogICAgc2V0UHJvZ3Jlc3M6IGZ1bmN0aW9uIChwcm9nKSB7CiAgICAgIHRoaXMucHJvZ3Jlc3MgPSBwcm9nOwogICAgICByZXR1cm47CiAgICB9LAoKICAgIGNoZWNrX3N0YXR1czogZnVuY3Rpb24gKCkgewogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgICQuYWpheCh7CiAgICAgICAgdHlwZTogIkdFVCIsCiAgICAgICAgdXJsOiBzZWxmLnVwZGF0ZVVybCwKICAgICAgICBkYXRhOiB7IF9pZDogc2VsZi5pZCB9LAogICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhlKTsKICAgICAgICAgIGlmIChlLm1lc3NhZ2UgIT0gbnVsbCAmJiBlWyJtZXNzYWdlIl1bInN0YXR1cyJdID09ICJkb25lIikgewogICAgICAgICAgICBjb25zb2xlLmxvZygiRG9uZSIpOwogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICBpZihlLnJlc3BvbnNlSlNPTlsnbWVzc2FnZSddID09IG51bGwpewogICAgICAgICAgICBzZXRUaW1lb3V0KHNlbGYuY2hlY2tfc3RhdHVzLCBzZWxmLmludGVydmFsKTsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBub3RGb3VuZExpc3QgPSBlLnJlc3BvbnNlSlNPTlsibWVzc2FnZSJdWyJub3RfZm91bmQiXTsKCiAgICAgICAgICBpZiAoZS5yZXNwb25zZUpTT05bIm1lc3NhZ2UiXVsic3RhdHVzIl0gPT0gImRvbmUiKSB7CiAgICAgICAgICAgIHNlbGYucHJvZ3Jlc3MgPSAxMDA7CiAgICAgICAgICAgIC8vJCgiI2xvYWRlciIpLmFkZENsYXNzKCJoaWRlIik7CiAgICAgICAgICAgICQoIiN0b3RhbENvdW50IikuaGlkZSgpOwoKICAgICAgICAgICAgc2VsZi5ub3RGb3VuZCA9IG5vdEZvdW5kTGlzdDsKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZlZWRiYWNrIikuaW5uZXJUZXh0ID0KICAgICAgICAgICAgICBlLnJlc3BvbnNlSlNPTlsibWVzc2FnZSJdWyJtZXNzYWdlIl07CgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicG9zdF9wcm9jZXNzX2ZlZWRiYWNrIikuaW5uZXJUZXh0ID0KICAgICAgICAgICAgICBlLnJlc3BvbnNlSlNPTlsibWVzc2FnZSJdWyJtZXNzYWdlIl07CiAgICAgICAgICAgIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RvdGFsT0xTJykuaW5uZXJUZXh0ID0gIkltcG9ydGVkIGZyb20gT0xTOiAiICArIGUucmVzcG9uc2VKU09OWydtZXNzYWdlJ11bJ29sc19jb3VudCddOwogICAgICAgICAgICAkKCIjbG9hZGVyIikuaGlkZSgpOwogICAgICAgICAgICByZXR1cm47CgogICAgICAgICAgICAvKioKICAgICAgICAgICAgICoKICAgICAgICAgICAgICogQWRkIG5vdCBmb3VuZCBmZWVkIGJhY2sKICAgICAgICAgICAgICovCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBzZWxmLm5vdEZvdW5kID0gbm90Rm91bmRMaXN0OwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgidG90YWxDb3VudCIpLmlubmVyVGV4dCA9CiAgICAgICAgICAgICAgIlByb2Nlc3NpbmcgIiArCiAgICAgICAgICAgICAgZS5yZXNwb25zZUpTT05bIm1lc3NhZ2UiXVsidG90YWwiXSArCiAgICAgICAgICAgICAgIiBsaW5lcyBvZiBkYXRhLi4uIjsKICAgICAgICAgICAgc2VsZi5wcm9ncmVzcyA9IGUucmVzcG9uc2VKU09OWyJtZXNzYWdlIl1bImRvbmUiXTsKICAgICAgICAgICAgc2V0VGltZW91dChzZWxmLmNoZWNrX3N0YXR1cywgc2VsZi5pbnRlcnZhbCk7CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAogICAgdnN1Y2Nlc3M6IGZ1bmN0aW9uIChmaWxlLCByZXNwb25zZSkgewogICAgICB2YXIgdGV4dCA9ICJTdWNjZXNzZnVsbHkgdXBsb2FkZWQgZmlsZSAiICsgZmlsZS5uYW1lOwogICAgICBNLnRvYXN0KHsgaHRtbDogdGV4dCB9KTsKCiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmZWVkYmFjayIpLmlubmVyVGV4dCA9IHJlc3BvbnNlWyJtZXNzYWdlIl07CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJkcm9wem9uZSIpLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxvYWRlciIpLmNsYXNzTGlzdC5yZW1vdmUoImhpZGUiKTsKCiAgICAgIC8vdmFyIHNlbGYgPSB0aGlzOwoKICAgICAgdGhpcy5jaGVja19zdGF0dXMoKTsKICAgIH0sCiAgICB2ZXJyb3I6IGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgIHZhciB0ZXh0ID0gIkVycm9yIHdoaWxlIHVwbG9hZGluZyAiICsgZmlsZS5uYW1lOwogICAgICBNLnRvYXN0KHsgaHRtbDogdGV4dCB9KTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxvYWRlciIpLmNsYXNzTGlzdC5hZGQoImhpZGUiKTsKICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZlZWRiYWNrIikuaW5uZXJUZXh0ID0KICAgICAgICAiU29tZXRoaW5nIHdlbnQgd3JvbmcuLi4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlciI7CiAgICB9LAoKICAgIHNlbmRpbmdFdmVudChmaWxlLCB4aHIsIGZvcm1EYXRhKSB7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiX2lkIiwgdGhpcy5pZCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgiX3NvdXJjZSIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzb3VyY2VTZWxlY3QnKS52YWx1ZSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["DataUpload.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"DataUpload.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <h1>Data Upload</h1>\n    <div class=\"container center-align\">\n      <div class=\"row\">\n        \n        <div class=\"input-field col s6\">\n        <p>Please select a source for your data!</p>\n      <select class=\"browser-default\" id=\"sourceSelect\">\n        <option v-for=\"src in sourceList\" :key=\"src\" :value=\"src\">{{src}}</option>\n      </select>\n      </div>\n      </div>\n      <vue-dropzone\n        ref=\"myVueDropzone\"\n        id=\"dropzone\"\n        :options=\"dropzoneOptions\"\n        @vdropzone-success=\"vsuccess\"\n        @vdropzone-error=\"verror\"\n        @vdropzone-file-added=\"addedFile\"\n        @vdropzone-sending=\"sendingEvent\"\n      ></vue-dropzone>\n      <vue-ellipse-progress\n        id=\"loader\"\n        class=\"hide\"\n        :progress=\"progress\"\n        v-bind=\"options\"\n      >\n        <!--\n        <span slot=\"legend-value\" style=\"color : black\" id=\"totalCount\"></span>-->\n        <p slot=\"legend-caption\" id=\"feedback\"></p>\n      </vue-ellipse-progress>\n\n      <p id=\"totalCount\"></p>\n      \n      <p id=\"post_process_feedback\"></p>\n      <p id=\"totalOLS\"></p>\n      <div\n        id=\"not_found\"\n        v-if=\"notFound.length > 0\"\n        class=\"container\"\n        style=\"margin-bottom: 80px\"\n      >\n        <h5>Variables not automatically mapped (total: {{ this.notFound.length }}):</h5>\n       \n            <ul v-for=\"attr in notFound\" :key=\"attr\">\n              <li>{{ attr }}</li>\n\n             \n            </ul>\n\n        <a href=\"/data-steward/mapper\">Go to mapping assistant</a>\n     \n        <!--\n        <div class=\"row mt-3\">\n          <div class=\"col s1\">\n        <button class=\"btn blue-grey lighten-1\" @click=\"refreshAttributes()\">refresh targets</button>\n          </div>\n          <div class=\"col s11\"></div>\n        </div>-->\n      </div>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport vue2Dropzone from \"vue2-dropzone\";\nimport \"vue2-dropzone/dist/vue2Dropzone.min.css\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport M from \"materialize-css\";\nimport $ from \"jquery\";\nimport axios from \"axios\";\n\nexport default {\n  components: {\n    vueDropzone: vue2Dropzone,\n  },\n  data: function () {\n    return {\n      dropzoneOptions: {\n        url: process.env.VUE_APP_CLINICALURL + \"/post/basic-upload\",\n        thumbnailWidth: 150,\n        addRemoveLinks: true,\n        maxFiles: 1,\n      },\n      notFound: [],\n      allAttributes: {},\n      allSources: {},\n      sourceList: [],\n      id: uuidv4(),\n      updateUrl: process.env.VUE_APP_CLINICALURL + \"/get/cache\",\n      interval: 2000,\n      progress: 0,\n      options: {\n        color: \"#579fdc\",\n        \"empty-color\": \"#324c7e\",\n        size: 300,\n        thickness: 5,\n        \"empty-thickness\": 3,\n        \"line-mode\": \"out 5\",\n        animation: \"rs 700 1000\",\n        \"font-size\": \"1.5rem\",\n        \"font-color\": \"white\",\n      },\n    };\n  },\n  async created() {\n    const attributes = await axios.get(\n      process.env.VUE_APP_CLINICALURL + \"/get/attributes/all\"\n    );\n    const sources_all = await axios.get(\n      process.env.VUE_APP_CLINICALURL + \"/get/sources/all\"\n    );\n    var sourceObj = {};\n    var sourceList = [];\n    sources_all[\"data\"][\"sources\"].forEach((elem) => {\n      sourceObj[elem] = null;\n      \n    });\n    sources_all['data'][\"abbreviations\"].forEach(elem =>{\n      sourceList.push(elem);\n    });\n    this.allSources = sourceObj;\n    this.sourceList = sourceList;\n    var attrObj = {};\n    attributes[\"data\"][\"attributes\"].forEach((attr) => {\n      attrObj[attr.name] = null;\n    });\n    this.allAttributes = attrObj;\n  },\n\n  mounted(){\n    var elems = document.querySelectorAll('select');\n    M.FormSelect.init(elems);\n  },\n  updated() {\n    var elems = document.querySelectorAll(\".autocomplete\");\n\n    M.Autocomplete.init(elems, { data: this.allAttributes });\n    var elems_source = document.querySelectorAll(\".autocomplete_source\");\n\n    M.Autocomplete.init(elems_source, {\n      data: this.allSources,\n      onAutocomplete: function (val) {\n        var emptyFields = [];\n        document.querySelectorAll(\".autocomplete_source\").forEach((elem) => {\n          if (elem.value == null || elem.value == \"\") {\n            emptyFields.push(elem);\n          }\n        });\n\n        emptyFields.forEach((elem) => {\n          elem.value = val;\n        });\n        M.updateTextFields();\n      },\n    });\n  },\n\n  methods: {\n\n\n    refreshAttributes: async function(){\n          const attributes = await axios.get(\n      process.env.VUE_APP_CLINICALURL + \"/get/attributes/all\"\n    );\n    const sources_all = await axios.get(\n      process.env.VUE_APP_CLINICALURL + \"/get/sources/all\"\n    );\n    var sourceObj = {};\n    sources_all[\"data\"][\"sources\"].forEach((elem) => {\n      sourceObj[elem] = null;\n    });\n    this.allSources = sourceObj;\n\n    var attrObj = {};\n    attributes[\"data\"][\"attributes\"].forEach((attr) => {\n      attrObj[attr.name] = null;\n    });\n    this.allAttributes = attrObj;\n    M.toast({html: \"Refreshed variable autocomplete...\"});\n\n    },\n    addMapping: async function (attr) {\n      var target = document.getElementById(attr + \"_mapping_field\").value;\n      if (target == null || target == \"\") {\n        M.toast({ html: \"Please check your input!\" });\n        return;\n      }\n\n      var source = document.getElementById(attr + \"_source_field\").value;\n\n      const mappingResponse = await axios({\n        method: \"post\",\n        url: process.env.VUE_APP_CLINICALURL + \"/post/basic-mapping\",\n        data: {\n          source: source,\n          source_attribute: attr,\n          target: target,\n        },\n        withCredentials: true,\n      });\n      if (mappingResponse.data[\"message\"] == \"ok\") {\n        this.notFound = this.notFound.filter((item) => item != attr);\n        M.toast({ html: \"You successfully mapped: \" + attr });\n      } else {\n        document.getElementById(attr + \"_feedback\").innerText =\n          mappingResponse.data[\"message\"];\n      }\n      return;\n    },\n    addedFile: function () {\n      document.getElementById(\"feedback\").innerText =\n        \"Your data is getting processed\";\n    },\n    setProgress: function (prog) {\n      this.progress = prog;\n      return;\n    },\n\n    check_status: function () {\n      var self = this;\n      $.ajax({\n        type: \"GET\",\n        url: self.updateUrl,\n        data: { _id: self.id },\n        success: function (e) {\n          console.log(e);\n          if (e.message != null && e[\"message\"][\"status\"] == \"done\") {\n            console.log(\"Done\");\n          }\n        },\n        complete: function (e) {\n          if(e.responseJSON['message'] == null){\n            setTimeout(self.check_status, self.interval);\n          }\n          var notFoundList = e.responseJSON[\"message\"][\"not_found\"];\n\n          if (e.responseJSON[\"message\"][\"status\"] == \"done\") {\n            self.progress = 100;\n            //$(\"#loader\").addClass(\"hide\");\n            $(\"#totalCount\").hide();\n\n            self.notFound = notFoundList;\n            document.getElementById(\"feedback\").innerText =\n              e.responseJSON[\"message\"][\"message\"];\n\n            document.getElementById(\"post_process_feedback\").innerText =\n              e.responseJSON[\"message\"][\"message\"];\n            //document.getElementById('totalOLS').innerText = \"Imported from OLS: \"  + e.responseJSON['message']['ols_count'];\n            $(\"#loader\").hide();\n            return;\n\n            /**\n             *\n             * Add not found feed back\n             */\n          } else {\n            self.notFound = notFoundList;\n            document.getElementById(\"totalCount\").innerText =\n              \"Processing \" +\n              e.responseJSON[\"message\"][\"total\"] +\n              \" lines of data...\";\n            self.progress = e.responseJSON[\"message\"][\"done\"];\n            setTimeout(self.check_status, self.interval);\n          }\n        },\n      });\n    },\n    vsuccess: function (file, response) {\n      var text = \"Successfully uploaded file \" + file.name;\n      M.toast({ html: text });\n\n      document.getElementById(\"feedback\").innerText = response[\"message\"];\n      document.getElementById(\"dropzone\").classList.add(\"hide\");\n      document.getElementById(\"loader\").classList.remove(\"hide\");\n\n      //var self = this;\n\n      this.check_status();\n    },\n    verror: function (file) {\n      var text = \"Error while uploading \" + file.name;\n      M.toast({ html: text });\n      document.getElementById(\"loader\").classList.add(\"hide\");\n      document.getElementById(\"feedback\").innerText =\n        \"Something went wrong... Please try again later\";\n    },\n\n    sendingEvent(file, xhr, formData) {\n      formData.append(\"_id\", this.id);\n      formData.append(\"_source\", document.getElementById('sourceSelect').value);\n    },\n  },\n};\n</script>\n\n<style>\n.float_bottom_right {\n  position: absolute;\n  bottom: 30px;\n  right: 30px;\n}\n\n.tap-target {\n  color: #fff;\n}\n.tap-target a {\n  color: #fff;\n  text-decoration: underline;\n}\n</style>"]}]}